<!DOCTYPE html "-//W3C//DTD XHTML 1.0 Strict//EN"
 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <title>Calculate distance between two points</title>
    <script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script>
    <script type="text/javascript" charset="utf-8" src="../js/mxn.js?(googlev3)"></script>
    <style>
    div#mymap {
        width: 400px;
        height: 350px;
    }
    </style>
    <script type="text/javascript">
    var mapstraction;
    var dist;
    var wportland, eportland;
    function create_map() {
        mapstraction = new mxn.Mapstraction('mymap', 'googlev3');

        wportland = new mxn.LatLonPoint(45.52822, -122.67195);
  		eportland = new mxn.LatLonPoint(45.52933, -122.66957);

        dist = eportland.distance(wportland);
        mapstraction.addPolylineWithData(new mxn.Polyline([wportland, eportland]), {color:'#ff0000'});
		mapstraction.addMarker(new mxn.Marker(wportland));
		mapstraction.addMarker(new mxn.Marker(eportland));
        mapstraction.autoCenterAndZoom();

        var disttext = document.createTextNode("Distance is " + dist + " km.");
		mapstraction.currentElement.parentNode.appendChild(disttext);
		
        mapstraction.addEventListener('click', function(clickpoint) { 			
			alert('latitude: ' + clickpoint.lat + '\nlongitude: ' + clickpoint.lon);
		});


    }
    </script>
  </head>
  <body onload="create_map()">
    <div id="mymap"></div>
  </body>
</html>
